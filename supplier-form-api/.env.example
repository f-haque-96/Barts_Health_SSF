# NHS Supplier Setup Form API - Environment Variables
# Copy this file to .env and fill in the values

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
DB_HOST=localhost
DB_PORT=1433
DB_NAME=SupplierSetupDB
DB_USER=supplier_form_api
DB_PASSWORD=<secure_password_here>
# Use Windows Authentication (set to true if on domain-joined server)
DB_TRUSTED_CONNECTION=false

# ===========================================
# SHAREPOINT CONFIGURATION
# ===========================================
SP_SITE_URL=https://nhs.sharepoint.com/sites/R1H_FIN_Legacy_Procurement
SP_CLIENT_ID=<from_app_registration>
SP_CLIENT_SECRET=<from_app_registration>
SP_TENANT_ID=<nhs_tenant_id>
# Document Libraries
SP_DOCS_LIBRARY=SupplierDocuments
SP_SENSITIVE_DOCS_LIBRARY=SensitiveDocuments
SP_STATUS_LIST=SubmissionStatus

# ===========================================
# AZURE AD / ADFS AUTHENTICATION
# ===========================================
AZURE_AD_TENANT_ID=<nhs_tenant_id>
AZURE_AD_CLIENT_ID=<app_client_id>
AZURE_AD_CLIENT_SECRET=<app_secret>
# For on-premise ADFS, use ADFS endpoint instead
# ADFS_METADATA_URL=https://adfs.bartshealth.nhs.uk/FederationMetadata/2007-06/FederationMetadata.xml

# ===========================================
# ALEMBA INTEGRATION
# ===========================================
ALEMBA_API_URL=https://servicedeskbartshealth.alembacloud.com/api
ALEMBA_API_KEY=<alemba_api_key>
# Alemba field mappings (for ticket closure)
ALEMBA_CLOSURE_STATUS=Closed
ALEMBA_RESOLUTION_CODE=Resolved

# ===========================================
# COMPANIES HOUSE API
# ===========================================
CH_API_KEY=<companies_house_api_key>
CH_API_URL=https://api.company-information.service.gov.uk

# ===========================================
# SERVER CONFIGURATION
# ===========================================
NODE_ENV=production
API_PORT=3001
# CORS - Frontend URL(s), comma-separated
CORS_ORIGIN=https://weshare.bartshealth.nhs.uk
# Session secret for cookie signing
SESSION_SECRET=<generate_random_32_char_string>

# ===========================================
# SECURITY
# ===========================================
# Rate limiting (requests per minute per IP)
RATE_LIMIT_MAX=100
# File upload limits (in bytes)
MAX_FILE_SIZE=10485760
# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=.pdf,.png,.jpg,.jpeg,.doc,.docx

# ===========================================
# LOGGING
# ===========================================
LOG_LEVEL=info
# Log file path (relative to server root)
LOG_FILE_PATH=./logs/app.log

# ===========================================
# NOTIFICATIONS (Power Automate)
# ===========================================
# Power Automate webhook URL for email notifications
PA_NOTIFICATION_WEBHOOK=<power_automate_webhook_url>
